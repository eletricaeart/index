

<!DOCTYPE html>
<html lang="pt-br">
   <head>
      <title>Elétrica & Art</title>
   
      <link rel="icon" href="src/pix/logo.svg" type="svg+xml">
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <!-- == [ StyleSheets ] 
      == == == == == == == == == -->
      <link rel="stylesheet" href="../Assets/styles/clb.css">
      <link rel="stylesheet" href="../Assets/styles/globals.css">
      <!-- <link rel="stylesheet" href="../Assets/styles/includes/theme.css"> -->
      <link rel="stylesheet" href="../Assets/fonts/fonts.css">
      <!-- == [ Scripts ] 
      == == == == == == == == == -->
      <script src="../Assets/scripts/clb.js" defer=""></script>
      <script src="../Assets/scripts/global.js" defer=""></script>
      <!-- == [ includes ]
      == == == == == == == == == -->
      <script src="../Assets/scripts/Modules/AppBar.js" defer=""></script>
      <script src="../Assets/scripts/Modules/Drawer.js" defer=""></script>
      <script src="../Assets/scripts/Modules/NavBar.js" defer=""></script>
      <script src="../Assets/scripts/Modules/EA-Card.js" defer=""></script>
      <script src="../Assets/scripts/Widgets/NavLink.js" defer=""></script>
      <script src="../Assets/scripts/Widgets/Button.js" defer=""></script>
      
      <style>
      html:has( body > add-service ) {
         height: calc( 90dvh - 92px );
      }
      body {
         /* min-height: 100%; */
      }
      home-page[ section="new service"] {
         flex: 1;
      }
      add-service {
         position: sticky;
         bottom: 0;
         left: 0;
      }
      list[services] > li {
         padding: 1.2em 0;
         border-bottom: 2px #9999 solid;
         gap: .5em;
      }
      list > li > info {
         display: flex;
         flex-direction: row !important;
         align-items: center;
         justify-content: space-between;
      }
      list > li > info > * {
         flex: 1;
         font-size: .8em;
         color: #555;
      }
      info > total {
         justify-content: flex-end;
      }
      </style>
   </head>
   <body>
      <appbar></appbar>
      <drawer></drawer>
      
      <home-page section="new service">
         <header>
            <content>
               <tt>Novo Serviço</tt>
            </content>
         </header>
         <content id="page_content">
            <list services id="serviços_section">
               <li section>
                  <name>Forro de DryWall</name>
                  <info>
                     <unit section>
                        2 x R$ 500,00
                     </unit>
                     <total row>
                        <strong>Total&nbsp;</strong> R$ 1.000,00
                     </total>
                  </info>
               </li>
            </list>
         </content>
      </home-page>
      <add-service section>
         <content>
            <form action="" method="get" accept-charset="utf-8" id="form_new_service">
               <form-body id="form_body">
                  <service section>
                     <content>
                        <label id="label_service_description">
                           <t>Descrição</t>
                           <input type="text" name="service_description" id="input_service_description" value="" placeholder="" required/>
                        </label>
                        <service-info section class="multi">
                           <label id="label_quantity">
                              <t>Quantidade</t>
                              <input type="text" name="quantity" id="input_quantity" value="" placeholder=""/>
                           </label>
                           <label id="label_unity_price">
                              <t>Valor</t>
                              <input type="text" name="unity_price" id="input_unity_price" value="" placeholder="" required/>
                           </label>
                        </service-info>
                     </content>
                  </service>
               </form-body>
               <footer>
                  <content class="multi">
                     <input type="button" id="btn_add_service" value="Adicionar mais serviço" />
                     <input type="submit" id="submit" value="Salvar" />
                  </content>
               </footer>
            </form>
         </content>
      </add-service>
      
      
      
      <script>
         'use strict';
         /* [ properties ]
         =================================== */
         /* -------------------------------- */
         
         
         
         /* [ events ]
         =================================== */
         window.addEventListener( 'load', () => {

            Drawer();
            NavLink();
            
            btn_add_service.addEventListener( "click", () => {
               let 
                  inputsList = [
                     input_quantity,
                     input_service_description,
                  ]
                  ,
                  inputsIsValidated = 0 
                  ,
                  totalUnity = toBrl( ( input_quantity.value * input_unity_price.value ) )
                  ,
                  unity = input_quantity.value == "" || input_quantity.value == 0 ? 1 : input_quantity.value
               ;
               
               inputsList.forEach( input => {
                  if( !input.value == "" ) {
                     serviços_section.innerHTML += `
                        <li section>
                           <name>${ input_service_description.value }</name>
                           <info>
                              <unit section>
                                 ${ unity } x R$ ${ toBrl( input_unity_price.value ) }
                              </unit>
                              <total row>
                                 <strong>Total&nbsp;</strong> ${ totalUnity }
                              </total>
                           </info>
                        </li>
                     `;
                  }
               } );
            } );
         } );
      </script>
   </body>
</html>
